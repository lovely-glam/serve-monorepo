services:
  authserver:
    container_name: glam_auth_server
    image: ${DOCKER_USER}/authserver:latest
    restart: always
    environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
      GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
      GOOGLE_CLIENT_SECRET: ${GOOGLE_CLIENT_SECRET}
      GOOGLE_REDIRECT_URI: ${GOOGLE_REDIRECT_URI}
    networks:
      - glam-networks
      
  systemserver:
    container_name: glam_system_server
    image: ${DOCKER_USER}/systemserver:latest
    restart: always
    environment:
      environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
    networks:
      - glam-networks

  chatsocketserver:
    container_name: glam_chatsocket_server 
    restart: always
    image: ${DOCKER_USER}/chatsocketserver:latest
    environment:
      environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
    networks:
      - glam-networks
  
  oauthserver:
    container_name: glam_oauth_server
    restart: always
    image: ${DOCKER_USER}/oauthserver:latest
    environment:
      environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
    networks:
      - glam-networks
  
  userserver:
    container_name: glam_user_server
    restart: always
    image: ${DOCKER_USER}/userserver:latest
    environment:
      environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
    networks:
      - glam-networks
  
  workerservice:
    container_name: glam_worker_service
    image: ${DOCKER_USER}/workerservice:latest
    restart: always
    environment:
      DB_URL: ${DB_URL}
      DB_USERNAME: ${DB_USERNAME}
      DB_PASSWORD: ${DB_PASSWORD}
      DB_NAME: ${DB_NAME}
      PENV: ${PENV}
      PORT: ${PORT}
      BASE_URL_API: ${BASE_URL_API}
      ORIGIN_ALLOWED: ${ORIGIN_ALLOWED}
      ACCESS_TOKEN_EXT: ${ACCESS_TOKEN_EXT}
      ACCESS_TOKEN_KEY: ${ACCESS_TOKEN_KEY}
      REFRESH_TOKEN_EXT: ${REFRESH_TOKEN_EXT}
      REFRESH_TOKEN_KEY: ${REFRESH_TOKEN_KEY}
    networks:
      - glam-networks

networks:
  glam-networks:
    name: glam_networks
    external: true